<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create New Project</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    /* Unified progress bar styling with annotation.html */
    .progress-container {
      position: relative;
      padding: 0 16px;
      margin: 40px 0;
    }
    .progress-line {
      position: absolute;
      height: 2px;
      background-color: #e5e5e5;
      left: 24px;
      right: 24px;
      top: 14px;
    }
    .progress-active {
      position: absolute;
      height: 2px;
      background-color: #000;
      left: 24px;
      width: 0; /* Step 1 so no progress yet */
      top: 14px;
    }
    .step-circles {
      position: relative;
      display: flex;
      justify-content: space-between;
      z-index: 10;
    }
    .error-input {
      border: 1px solid #f56565 !important;
      background-color: #fff5f5 !important;
    }
    .error-message {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }
    .error-message.show {
      max-height: 50px;
    }
    .input-transition {
      transition: all 0.3s ease;
    }
  </style>
</head>
<body class="bg-white min-h-screen font-[Inter]">
  <div class="max-w-4xl mx-auto px-4 py-6">
    <!-- Header with back button -->
    <div class="flex items-center mb-8 border-b pb-4">
      <a href="/frontend/dashboard.html" class="text-3xl text-black hover:text-gray-700 transition-colors mr-4" aria-label="Go back">‚Üê</a>
      <h1 class="text-2xl font-bold text-black">Create new project</h1>
    </div>
    
    <!-- Unified progress steps -->
    <div class="progress-container">
      <div class="progress-line"></div>
      <div class="progress-active"></div>
      <div class="step-circles">
        <div class="flex items-center justify-center w-8 h-8 rounded-full bg-black text-white font-medium text-sm">1</div>
        <div class="flex items-center justify-center w-8 h-8 rounded-full bg-gray-200 text-gray-700 font-medium text-sm">2</div>
        <div class="flex items-center justify-center w-8 h-8 rounded-full bg-gray-200 text-gray-700 font-medium text-sm">3</div>
        <div class="flex items-center justify-center w-8 h-8 rounded-full bg-gray-200 text-gray-700 font-medium text-sm">4</div>
      </div>
    </div>
    
    <!-- Form Card -->
  <div class="bg-white border border-gray-200 rounded-lg p-8 mb-8">
      <h3 class="text-lg font-medium text-black mb-1">Project Details</h3>
      <p class="text-gray-600 text-sm mb-6">Provide basic information about your annotation project</p>
      
      <form id="projectForm" class="space-y-6">
        <div>
          <div class="flex items-center justify-between mb-2">
            <label for="projectName" class="block text-sm font-medium text-black">Project name<span class="text-red-600">*</span></label>
            <span class="text-xs text-gray-500">Required</span>
          </div>
          <input 
            type="text" 
            id="projectName" 
            placeholder="Enter project name" 
            class="w-full px-3 py-2 bg-gray-100 rounded focus:outline-none focus:ring-1 focus:ring-black input-transition"
          />
          <div id="nameError" class="error-message mt-1 text-sm text-red-600"></div>
        </div>
        
        <div>
          <label for="description" class="block text-sm font-medium text-black mb-2">Description</label>
          <textarea 
            id="description" 
            placeholder="Enter project description" 
            rows="4" 
            class="w-full px-3 py-2 bg-gray-100 border-0 rounded focus:outline-none focus:ring-1 focus:ring-black"
          ></textarea>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label for="deadlineText" class="block text-sm font-medium text-black mb-2">Deadline</label>
            <input 
              type="text" 
              id="deadlineText" 
              placeholder="DD/MM/YYYY" 
              class="w-full px-3 py-2 bg-gray-100 border-0 rounded focus:outline-none focus:ring-1 focus:ring-black"
              onfocus="this.type='date'" 
              onblur="if(this.value===''){this.type='text'}"
            />
          </div>
          
          <div>
            <label for="prioritySelect" class="block text-sm font-medium text-black mb-2">Priority</label>
            <div class="relative">
              <select 
                id="prioritySelect" 
                class="w-full px-3 py-2 bg-gray-100 border-0 rounded focus:outline-none focus:ring-1 focus:ring-black appearance-none"
              >
                <option value="">Select priority</option>
                <option value="Low">Low</option>
                <option value="Medium">Medium</option>
                <option value="High">High</option>
              </select>
              <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                  <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/>
                </svg>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    
    <!-- Actions -->
    <div class="flex justify-end">
      <button 
        id="nextButton" 
        class="px-6 py-2 bg-black hover:bg-gray-800 text-white font-medium rounded transition-colors focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2"
      >
        Next
      </button>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const projectNameInput = document.getElementById('projectName');
      const nameError = document.getElementById('nameError');
      const nextButton = document.getElementById('nextButton');
      const projectForm = document.getElementById('projectForm');
      
      // Function to validate project name
      function validateProjectName() {
        if (projectNameInput.value.trim() === '') {
          projectNameInput.classList.add('error-input');
          nameError.textContent = 'Project name is required';
          nameError.classList.add('show');
          return false;
        } else {
          projectNameInput.classList.remove('error-input');
          nameError.textContent = '';
          nameError.classList.remove('show');
          return true;
        }
      }
      
      // Real-time validation as user types
      projectNameInput.addEventListener('input', function() {
        if (projectNameInput.value.trim() !== '') {
          projectNameInput.classList.remove('error-input');
          nameError.textContent = '';
          nameError.classList.remove('show');
        }
      });
      
      // Validate on blur
      projectNameInput.addEventListener('blur', validateProjectName);
      
      // Submit handler
      nextButton.addEventListener('click', function(e) {
        e.preventDefault();
        
        const isValid = validateProjectName();
        
        if (isValid) {
          // Simulate form submission with visual feedback
          nextButton.disabled = true;
          nextButton.innerHTML = '<span class="inline-block mr-2">Processing</span><span class="animate-pulse">...</span>';
          
          // Store form data in sessionStorage for persistence
          sessionStorage.setItem('projectName', projectNameInput.value);
          sessionStorage.setItem('projectDescription', document.getElementById('description').value);
          sessionStorage.setItem('projectDeadline', document.getElementById('deadlineText').value);
          sessionStorage.setItem('projectPriority', document.getElementById('prioritySelect').value);
          
          // Redirect after a short delay to show the processing state
          setTimeout(function() {
            // Proceed to annotation step (step 2)
            window.location.href = "annotation.html";
          }, 500);
        } else {
          // Add a shake effect to the input field
          projectNameInput.classList.add('animate-shake');
          setTimeout(() => {
            projectNameInput.classList.remove('animate-shake');
          }, 500);
          
          // Scroll to the error field if not visible
          projectNameInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
          projectNameInput.focus();
        }
      });
      
      // Check for saved form data and populate fields
      if (sessionStorage.getItem('projectName')) {
        projectNameInput.value = sessionStorage.getItem('projectName');
      }
      if (sessionStorage.getItem('projectDescription')) {
        document.getElementById('description').value = sessionStorage.getItem('projectDescription');
      }
      if (sessionStorage.getItem('projectDeadline')) {
        document.getElementById('deadlineText').value = sessionStorage.getItem('projectDeadline');
      }
      if (sessionStorage.getItem('projectPriority')) {
        document.getElementById('prioritySelect').value = sessionStorage.getItem('projectPriority');
      }
      
      // Add custom shake animation to tailwind config
      if (window.tailwind) {
        tailwind.config = {
          theme: {
            extend: {
              keyframes: {
                shake: {
                  '0%, 100%': { transform: 'translateX(0)' },
                  '10%, 30%, 50%, 70%, 90%': { transform: 'translateX(-5px)' },
                  '20%, 40%, 60%, 80%': { transform: 'translateX(5px)' },
                }
              },
              animation: {
                shake: 'shake 0.5s cubic-bezier(.36,.07,.19,.97) both',
              }
            }
          }
        };
      }
    });
  </script>
</body>
</html>